{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"street\"\n}, \"Calle:\", -1);\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"district\"\n}, \"Distrito:\", -1);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"postal\"\n}, \"C贸digo postal:\", -1);\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Enviar\", -1);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"]))\n  }, [_hoisted_1, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"street\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.location.street = $event),\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.location.street]]), _hoisted_2, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"district\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.location.district = $event),\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.location.district]]), _hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"postal\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.location.postal = $event),\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.location.postal]]), _hoisted_4], 32)]);\n}","map":{"version":3,"names":["_createElementVNode","for","type","_createElementBlock","onSubmit","_cache","_withModifiers","args","$options","submitForm","_hoisted_1","id","$data","location","street","$event","required","_hoisted_2","district","_hoisted_3","postal","_hoisted_4"],"sources":["D:\\VS Code\\WebProject\\web-project\\src\\views\\RealizarPedido.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <form @submit.prevent=\"submitForm\">\r\n            <label for=\"street\">Calle:</label>\r\n            <input type=\"text\" id=\"street\" v-model=\"location.street\" required>\r\n            \r\n            <label for=\"district\">Distrito:</label>\r\n            <input type=\"text\" id=\"district\" v-model=\"location.district\" required>\r\n            \r\n            <label for=\"postal\">C贸digo postal:</label>\r\n            <input type=\"text\" id=\"postal\" v-model=\"location.postal\" required>\r\n\r\n            <button type=\"submit\">Enviar</button>\r\n        </form>\r\n    </div>\r\n</template>\r\n    \r\n<script>\r\nimport axios from 'axios';\r\nimport Global from '@/Global';\r\n    \r\nconst apiClient = axios.create({\r\n    withCredentials: true,\r\n});\r\n    \r\nexport default {\r\n    name: 'RealizarPedido',\r\n    props: ['orders','total'],\r\n    data() {\r\n        return {\r\n            url: Global.url,\r\n            location: {\r\n                street: '',\r\n                district: '',\r\n                postal: '',\r\n            },\r\n            ordersCopy: {},\r\n            invoice: {\r\n                idOrder: {},\r\n                date: '',\r\n                totalValue: 0,\r\n                idLocation: ''\r\n            },\r\n          };\r\n        },\r\n    created(){\r\n        this.ordersCopy = JSON.parse(this.orders);\r\n    },\r\n    methods: {\r\n    async submitForm() {\r\n        try {\r\n            //Obetner fecha actual en el formato correcto\r\n            let hoy = new Date();\r\n            let dia = hoy.getDate();\r\n            let mes = hoy.getMonth() + 1;\r\n            let anio = hoy.getFullYear();\r\n            let diaFormateado = String(dia).padStart(2, '0');\r\n            let mesFormateado = String(mes).padStart(2, '0');\r\n            let anioFormateado = String(anio);\r\n\r\n            let fechaFormateada = `${diaFormateado}/${mesFormateado}/${anioFormateado}`;\r\n\r\n            //Guardar primeramente la ubicaci贸n para obtener su id\r\n            const locationResult = await apiClient.post(this.url+'Location/save', this.location);\r\n\r\n            if(locationResult.data.status != 'error'){\r\n                const locationID = locationResult.data._id;\r\n                this.invoice = {\r\n                    idOrder: this.ordersCopy,\r\n                    date: fechaFormateada,\r\n                    totalValue: this.total,\r\n                    idLocation: locationID\r\n                }\r\n\r\n                await apiClient.post(this.url+'Invoice/save',this.invoice);\r\n                alert('Orden realizado correctamente');\r\n                this.$router.push('/product');\r\n            } else {\r\n                alert('Error al ingresar la ubicaci贸n');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error submitting form:', error);\r\n        }\r\n      }\r\n    }\r\n}\r\n</script>"],"mappings":";gCAGYA,mBAAA,CAAkC;EAA3BC,GAAG,EAAC;AAAQ,GAAC,QAAM;gCAG1BD,mBAAA,CAAuC;EAAhCC,GAAG,EAAC;AAAU,GAAC,WAAS;gCAG/BD,mBAAA,CAA0C;EAAnCC,GAAG,EAAC;AAAQ,GAAC,gBAAc;gCAGlCD,mBAAA,CAAqC;EAA7BE,IAAI,EAAC;AAAQ,GAAC,QAAM;;uBAXpCC,mBAAA,CAaM,cAZFH,mBAAA,CAWO;IAXAI,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;MAC7BG,UAAkC,E,gBAClCV,mBAAA,CAAkE;IAA3DE,IAAI,EAAC,MAAM;IAACS,EAAE,EAAC,QAAQ;+DAAUC,KAAA,CAAAC,QAAQ,CAACC,MAAM,GAAAC,MAAA;IAAEC,QAAQ,EAAR;gCAAjBJ,KAAA,CAAAC,QAAQ,CAACC,MAAM,E,GAEvDG,UAAuC,E,gBACvCjB,mBAAA,CAAsE;IAA/DE,IAAI,EAAC,MAAM;IAACS,EAAE,EAAC,UAAU;+DAAUC,KAAA,CAAAC,QAAQ,CAACK,QAAQ,GAAAH,MAAA;IAAEC,QAAQ,EAAR;gCAAnBJ,KAAA,CAAAC,QAAQ,CAACK,QAAQ,E,GAE3DC,UAA0C,E,gBAC1CnB,mBAAA,CAAkE;IAA3DE,IAAI,EAAC,MAAM;IAACS,EAAE,EAAC,QAAQ;+DAAUC,KAAA,CAAAC,QAAQ,CAACO,MAAM,GAAAL,MAAA;IAAEC,QAAQ,EAAR;gCAAjBJ,KAAA,CAAAC,QAAQ,CAACO,MAAM,E,GAEvDC,UAAqC,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}